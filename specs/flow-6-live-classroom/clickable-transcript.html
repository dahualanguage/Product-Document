<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Spec — ClickableTranscript</title>
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
      color: #1e293b; background: #f8fafc; line-height: 1.7; font-size: 14px;
    }

    /* ── Top bar ── */
    .topbar {
      background: #fff; border-bottom: 1px solid #e2e8f0;
      padding: 14px 40px; display: flex; align-items: center; gap: 12px;
      position: sticky; top: 0; z-index: 100;
    }
    .topbar a {
      color: #64748b; text-decoration: none; font-size: 13px; font-weight: 600;
      display: flex; align-items: center; gap: 6px; transition: color .15s;
    }
    .topbar a:hover { color: #1e293b; }
    .topbar .sep { color: #cbd5e1; }
    .topbar .current { color: #0ea5e9; font-weight: 700; }

    /* ── Layout ── */
    .container { max-width: 900px; margin: 0 auto; padding: 40px 40px 80px; }

    /* ── Header ── */
    .doc-header { margin-bottom: 40px; padding-bottom: 24px; border-bottom: 2px solid #e2e8f0; }
    .doc-header h1 { font-size: 28px; font-weight: 800; color: #0f172a; margin-bottom: 4px; }
    .doc-header .subtitle { color: #64748b; font-size: 14px; }
    .doc-header .meta { margin-top: 12px; display: flex; gap: 20px; font-size: 12px; color: #94a3b8; }
    .doc-header .meta span { background: #f1f5f9; padding: 3px 10px; border-radius: 4px; }

    /* ── Sections ── */
    h2 {
      font-size: 18px; font-weight: 800; color: #0f172a; margin: 40px 0 16px;
      padding-bottom: 8px; border-bottom: 1px solid #e2e8f0;
      display: flex; align-items: center; gap: 8px;
    }
    h2 .num {
      font-size: 11px; font-weight: 700; color: #fff; background: #0ea5e9;
      padding: 2px 8px; border-radius: 4px;
    }
    h3 { font-size: 15px; font-weight: 700; color: #334155; margin: 24px 0 10px; }
    p { margin-bottom: 10px; }
    ul, ol { margin: 0 0 12px 20px; }
    li { margin-bottom: 4px; }

    /* ── Cards ── */
    .card {
      background: #fff; border: 1px solid #e2e8f0; border-radius: 10px;
      padding: 20px 24px; margin-bottom: 16px;
      box-shadow: 0 1px 3px rgba(0,0,0,.04);
    }

    /* ── Tables ── */
    table { width: 100%; border-collapse: collapse; margin: 12px 0 20px; font-size: 13px; }
    th, td { padding: 10px 14px; text-align: left; border: 1px solid #e2e8f0; }
    th { background: #f8fafc; font-weight: 700; color: #334155; font-size: 12px; }
    td { color: #475569; }

    /* ── Callouts ── */
    .callout {
      border-radius: 8px; padding: 14px 18px; margin: 12px 0 16px;
      font-size: 13px; line-height: 1.6;
    }
    .callout-info { background: #eff6ff; border-left: 4px solid #3b82f6; color: #1e40af; }
    .callout-question {
      background: linear-gradient(135deg, #fefce8 0%, #fef9c3 100%);
      border: 2px solid #facc15; border-radius: 10px;
      padding: 18px 22px; margin: 20px 0 16px;
    }
    .callout-question .q-text {
      font-size: 17px; font-weight: 700; color: #854d0e; line-height: 1.5;
    }
    .callout-question .q-context {
      font-size: 12px; color: #a16207; margin-top: 6px; font-weight: 500;
    }

    /* ── Code blocks ── */
    .formula {
      background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 8px;
      padding: 14px 18px; margin: 10px 0 16px;
      font-family: "SF Mono", "Fira Code", monospace; font-size: 12px;
      line-height: 1.8; color: #334155; white-space: pre-wrap;
    }

    /* ── Placeholder ── */
    .placeholder {
      text-align: center; padding: 60px 20px; color: #94a3b8;
      font-size: 15px; font-weight: 600;
    }

    footer {
      text-align: center; padding: 24px 0; color: #94a3b8;
      font-size: 12px; border-top: 1px solid #e2e8f0; margin-top: 40px;
    }
  </style>
</head>
<body>

<!-- ── TOPBAR ── -->
<div class="topbar">
  <a href="../../index.html">Home</a>
  <span class="sep">/</span>
  <a href="../../flowcharts/flow-6-live-classroom.html">Flow 6 — Live Classroom</a>
  <span class="sep">/</span>
  <span class="current">ClickableTranscript</span>
</div>

<!-- ── CONTENT ── -->
<div class="container">

  <div class="doc-header">
    <h1>ClickableTranscript</h1>
    <p class="subtitle">Word-level interaction with live transcripts &mdash; tap any word for instant language support and difficulty tracking.</p>
    <div class="meta">
      <span>Flow 6 — Live Classroom</span>
      <span>Status: Planning</span>
      <span>Target: TBD</span>
    </div>
  </div>

  <h2><span class="num">1</span> Feature Goal</h2>

  <div class="callout-question">
    <div class="q-text">When an ESL student encounters an unfamiliar word during class, how do they get help without interrupting the lesson?</div>
    <div class="q-context">Students can't pause a live class. They need a way to silently flag words they don't understand and get instant help &mdash; while simultaneously generating data about what they struggle with.</div>
  </div>

  <p>
    The ClickableTranscript component renders the live transcript with every word as a tappable element.
    When a student clicks a word, the system immediately looks it up (via the <code>lookupWord</code> GraphQL query)
    and shows a support popup with translation, definition, and example usage. At the same time, the click is
    recorded as a <strong>difficulty event</strong> &mdash; building a per-student difficulty profile that feeds
    directly into the Data Dashboard (Flow 4, Section B).
  </p>

  <h2><span class="num">2</span> Interaction Flow</h2>

  <div class="card">
    <h3>User Journey</h3>
    <ol>
      <li>Student sees live transcript scrolling as teacher speaks</li>
      <li>Student taps a word they don't understand</li>
      <li><code>lookupWord</code> query fires with the word + surrounding context</li>
      <li>Popup appears with: translation, definition, pinyin (if Chinese), example sentences</li>
      <li>Student reads the support content, then dismisses or taps another word</li>
      <li>Each tap is stored as a difficulty event: <code>{ word, studentId, timestamp, sessionId, contextSentence }</code></li>
    </ol>
  </div>

  <h2><span class="num">3</span> Difficulty Event Schema</h2>

  <div class="formula">Event: {
  word: String          // The word the student clicked
  studentId: String     // Who clicked it
  sessionId: String     // Which live session
  timestamp: ISO8601    // When it happened
  contextSentence: String  // Surrounding sentence for context
  contentArea: String   // Subject being taught (science, math, etc.)
  source: "LIVE_TRANSCRIPT"  // Distinguishes from practice events
}</div>

  <div class="callout callout-info">
    <strong>Data pipeline:</strong> These events are the primary input for the Language Difficulty Profile
    and Language Access Level metrics in the Data Dashboard (Flow 4). When a student repeatedly clicks the
    same word or category of words, the system identifies it as a persistent difficulty area.
  </div>

  <h2><span class="num">4</span> Detailed Specification</h2>

  <p class="placeholder">Detailed specification coming soon. This document will be expanded with popup UI design, word disambiguation logic, caching strategy, and offline support considerations.</p>

  <footer>DAHUA AI &middot; Product Spec &middot; Flow 6 &mdash; Live Classroom &middot; February 2026</footer>
</div>

</body>
</html>